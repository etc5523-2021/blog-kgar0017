---
title: "India COVID Stats"
output:
  distill::distill_article:
    self_contained: false
---


```{r ,include=FALSE}
library(tidyverse)
library(here)
library(ggplot2)
library(sparkline)
library(DT)
library(kableExtra)
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE
)
```


# Data Description

The Blog is using the data collected by [ourworldindata.org](https://ourworldindata.org/coronavirus-source-data) and stored and updated timely in their github repo [here](https://github.com/owid/covid-19-data/tree/master/public/data). The team of **"Our World in Data"** has further collected this data from various sources such as:

* **Confirmed Cases**: This data comes from the [COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University](https://github.com/CSSEGISandData/COVID-19) (JHU)
*  **Hospitalizations and intensive care unit (ICU) admissions**: our data comes from the [European Centre for Disease Prevention and Control](https://www.ecdc.europa.eu/en/publications-data/download-data-hospital-and-icu-admission-rates-and-current-occupancy-covid-19) (ECDC) for a select number of European countries; and government sources for the [United Kingdom](https://coronavirus.data.gov.uk/details/healthcare), the [United States](https://healthdata.gov/dataset/covid-19-reported-patient-impact-and-hospital-capacity-state-timeseries), [Canada](https://covid19tracker.ca), [Israel](https://datadashboard.health.gov.il/COVID-19/general), [Algeria](https://github.com/yasserkaddour/covid19-icu-data-algeria), and [Switzerland](https://opendata.swiss/fr/dataset/covid-19-schweiz).
*  **Testing for COVID-19**: This data is collected by the **Our World in Data team** from official reports; you can find further details in our post on COVID-19 testing, including our [checklist of questions to understand testing data](https://ourworldindata.org/coronavirus-testing#our-checklist-for-covid-19-testing-data), information on [geographical and temporal coverage](https://ourworldindata.org/coronavirus-testing#which-countries-do-we-have-testing-data-for), and [detailed country-by-country source information](https://ourworldindata.org/coronavirus-testing#our-checklist-for-covid-19-testing-data). The testing dataset is updated around **twice a week**.
*  **Vaccinations against COVID-19**: Yhis data is collected by the **Our World in Data team** from official reports.
*  **Other variables**: This data is collected from a variety of sources (United Nations, World Bank, Global Burden of Disease, Blavatnik School of Government, etc.). More information is available in the [codebook](https://github.com/owid/covid-19-data/blob/master/public/data/owid-covid-codebook.csv).


The data is available in **csv**, **xlsx**, and **json** format. I wll be working on **csv** format for this blog post.

```{r read,include=FALSE}
covid <- read_csv(here::here("data/owid-covid-data.csv"))
```
```{r read1,include=FALSE}
covid_india <- covid %>% 
  filter(location == "India")
```

The main dataset is of dimensions **`r dim(covid)`**, whereas that of **India** alone is **`r dim(covid_india)`**.

```{r Q1,echo=FALSE}
covid_india_1 <- covid_india %>% 
  select(location,date,total_cases,new_cases,new_cases_smoothed,total_deaths,new_deaths,new_deaths_smoothed,new_tests,total_tests,total_vaccinations,people_vaccinated,people_fully_vaccinated,total_boosters,new_vaccinations,new_vaccinations_smoothed,population,population_density,extreme_poverty,cardiovasc_death_rate,diabetes_prevalence,female_smokers,male_smokers,handwashing_facilities,life_expectancy,excess_mortality)

covid_india_1 %>% 
  select(date,total_cases,new_cases,new_tests,total_tests) %>% 
  rename("Date" = date,
         "Total_Cases" = total_cases,
         "New_Cases" = new_cases,
         "New_Tests" = new_tests,
         "Total_Tests" = total_tests) %>% 
   slice_max(New_Cases,n = 5) %>% 
  mutate(Perc_New_Cases = round((New_Cases/New_Tests)*100,2)) %>% 
  kable(caption = "Top 5 days with max no of covid cases") %>% 
  kable_styling(bootstrap_options = c("basic","striped,hover"))
```

```{r Q2A,echo = FALSE}
sample_row <- covid_india_1 %>% 
  select(date,total_cases,total_vaccinations,people_vaccinated,people_fully_vaccinated,new_vaccinations) %>% 
  head(1) %>% 
  mutate(date = as.Date("2020-01-29"),
         total_cases = NA)


sample_data <- covid_india_1 %>% 
  select(date,total_cases,total_vaccinations,people_vaccinated,people_fully_vaccinated,new_vaccinations)

sample_data1 <- rbind(sample_row,sample_data)

sample_final <- sample_data1 %>% 
  filter(date != "2021-08-27") %>% 
  rename("Date_prev" = date,
         "Total_Cases_prev" = total_cases,
         "Total_Doses_prev" = total_vaccinations,
         "Tot_1st_Dose_prev" = people_vaccinated,
         "Tot_2nd_Dose_prev" = people_fully_vaccinated,
         "new_vaccinations_prev" = new_vaccinations)

covid_india_sample <- covid_india_1 %>% 
  select(date,total_cases,total_vaccinations,people_vaccinated,people_fully_vaccinated,new_vaccinations) %>% 
  rename("Date" = date,
         "Total_Cases" = total_cases,
         "Total_Doses" = total_vaccinations,
         "Tot_1st_Dose" = people_vaccinated,
         "Tot_2nd_Dose" = people_fully_vaccinated) 
  

cbind(covid_india_sample,sample_final) %>% 
  slice_max(new_vaccinations,n = 5) %>% 
  mutate(First_Dose = Tot_1st_Dose - Tot_1st_Dose_prev,
         Second_Dose = Tot_2nd_Dose - Tot_2nd_Dose_prev) %>% 
  select(Date,Total_Cases,Total_Doses,First_Dose,Second_Dose,new_vaccinations) %>% 
   mutate(Per_1st_Dose = round(First_Dose/(new_vaccinations)*100,2),
         Per_2nd_Dose = round((Second_Dose/new_vaccinations)*100,2)) %>% 
  select(-c(First_Dose,Second_Dose)) %>% 
  rename(First_Dose = "Per_1st_Dose",
         Second_Dose = "Per_2nd_Dose") %>% 
  kable(caption = "Top 5 days with max no of vaccinations done") %>% 
  kable_styling(bootstrap_options = c("basic","striped,hover"))
```

```